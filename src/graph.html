<!DOCTYPE html>
<html lang="ru-RU">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!--<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">-->

    <title>Find school processing</title>
    <link rel="stylesheet" href="extension/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="extension/font-awesome/css/all.css" type="text/css" media="all" />
    <link rel="stylesheet" href="css/all.css" />
</head>

<body>
//= template/header.html

<div class="p-fs">
    <div class="container">
        <div class="p-fs__step">
            Step 2. Choose your career
        </div>
        <div class="p-fs__title">
            Build your future with Align
        </div>

        <div class="p-fs__please m-build">
            The graph below displays the lifetime earning potential based on
            your school and occupation goals.
        </div>


        <div class="row">
            <div class="col aside-button-block">
                <div class="aside-button" data-toggle="modal" data-target="#aside-mobile">Determine your goals</div>
            </div>
            <div class="col-lg-4 fade modal" id="aside-mobile" aria-modal="true" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="g-modal-tell-us__close fal fa-times" data-dismiss="modal" aria-label="Close"></div>
                    //= template/aside.html
                </div>
            </div>
            <div class="col-lg-8">
                <div class="text-center">
                    <div class="form__graph">
                        <div class="additional_text">
                            You can see different annual income levels based on age. <br>Simply move your curser throughout the line graph.						    </div>
                        <div id="chart_div"></div>
                    </div>

                    <div class="col aside-button-block">
                        <div class="aside-button" data-toggle="modal" data-target="#aside-mobile"><span>+</span> Add Comparison</div>
                    </div>
                </div>
            </div>

        </div>

        <div class="form__footer-title mt-5">
            <h6 class="form-title">Lifetime Earning Potential</h6>
            <div class="form__footer-sub-title">To proceed please chose one of the following:</div>
        </div>
        <div class="js-carousel" data-ride="carousel" id="sliderControl">
            <div class="row form__blocks carousel-inner">
                <div class="col-lg-4 active">
                    <div class="form__block m-blue">
                        <div class="form__block-header">
                            <div class="form__block-label">
                                Bachelor’s Degree
                            </div>
                            <div class="form__block-title">
                                Graphic Design
                            </div>
                        </div>

                        <div class="form__block-data">
                            <div class="form__block-data-item">
                                <div class="form__block-label">
                                    Avg. Annual Income
                                </div>
                                <div class="form__block-data-item-num">
                                    $86K
                                </div>
                            </div>
                            <div class="form__block-data-item">
                                <div class="form__block-label">
                                    Years to Achieve
                                </div>
                                <div class="form__block-data-item-num">
                                    4 years
                                </div>
                            </div>
                        </div>

                        <div class="form__block-footer">
                            <div class="form__block-footer-btn">
                                <a href="form-2.html" class="form__block-footer-btn-link">Align My Career</a>
                            </div>

                            <div class="form__block-footer-del">
                                <i class="fa fa-trash-alt"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="form__block m-orange">
                        <div class="form__block-header">
                            <div class="form__block-label">
                                Doctorate Degree
                            </div>
                            <div class="form__block-title">
                                Physical Therapist Assistant & Aide
                            </div>
                        </div>

                        <div class="form__block-data">
                            <div class="form__block-data-item">
                                <div class="form__block-label">
                                    Avg. Annual Income
                                </div>
                                <div class="form__block-data-item-num">
                                    $250K
                                </div>
                            </div>
                            <div class="form__block-data-item">
                                <div class="form__block-label">
                                    Years to Achieve
                                </div>
                                <div class="form__block-data-item-num">
                                    7–10 yrs
                                </div>
                            </div>
                        </div>

                        <div class="form__block-footer">
                            <div class="form__block-footer-btn">
                                <a href="form-2.html" class="form__block-footer-btn-link">Align My Career</a>
                            </div>

                            <div class="form__block-footer-del">
                                <i class="fa fa-trash-alt"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="form__block m-green">
                        <div class="form__block-header">
                            <div class="form__block-label">
                                Associate’s Degree
                            </div>
                            <div class="form__block-title">
                                Business Development
                            </div>
                        </div>

                        <div class="form__block-data">
                            <div class="form__block-data-item">
                                <div class="form__block-label">
                                    Avg. Annual Income
                                </div>
                                <div class="form__block-data-item-num">
                                    $250K
                                </div>
                            </div>
                            <div class="form__block-data-item">
                                <div class="form__block-label">
                                    Years to Achieve
                                </div>
                                <div class="form__block-data-item-num">
                                    5 years
                                </div>
                            </div>
                        </div>

                        <div class="form__block-footer">
                            <div class="form__block-footer-btn">
                                <a href="form-2.html" class="form__block-footer-btn-link">Align My Career</a>
                            </div>

                            <div class="form__block-footer-del">
                                <i class="fa fa-trash-alt"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#sliderControl" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#sliderControl" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
</div>

//= template/footer.html

<script src="js/jquery-3.4.0.min.js"></script>
<script src="extension/jquery.nicescroll.js"></script>
<script src="extension/bootstrap/js/popper.min.js"></script>
<script src="extension/bootstrap/js/bootstrap.min.js"></script>
<script src="js/global.js"></script>
<script src="js/graph.js"></script>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    window.chartsData = [];
    google.charts.load('current', {'packages': ['corechart']});
    google.charts.setOnLoadCallback(startChart);

    function startChart() {
        var arr = [['Age', 'Wage']];
        for (var i = 0; i <= 2; i++) {
            arr.push([i, 0]);
        }
        var DataTable = google.visualization.arrayToDataTable(arr);
        var options = getChartOptions();
        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(DataTable, options);
    }

    function getChartOptions() {
        return {
            legend: {position: 'bottom'},
            chartArea: {
                width: '85%'
            },
            colors: ['#3366cc', '#ffc000', '#149d28'],
            hAxis: {
                title: 'Age'
            },
            vAxis: {
                title: 'Wage, $',
                format: 'short'
            },
            width: '100%',
            height: 500
        };
    }

    function drawChart()
    {
        if (window.chartsData.length === 0) {
            return false;
        }

        var totalData = []; $i = 0;

        $.each(window.chartsData, function (k, chartData) {
            $i++;
            var params = chartData.params;
            var data = chartData.data;

            // prepare data
            if (totalData.length === 0) {
                $.each(data, function (i, row) {
                    var tooltip = 'tooltip';
                    if (i > 0) {
                        tooltip = generateTooltip(row, params.socp);
                    }
                    totalData.push([row[0], row[1], tooltip]);
                });
            } else {
                $.each(totalData, function (i, total) {
                    var item = data[total[0]];
                    total.push(item[1]);
                    total.push(generateTooltip(item, params.socp));
                });
            }

            // generate bricks
            var str = params.schl;
            if (params.socp) {
                str += params.socp ? ' / ' + params.socp : '';		$label = params.schl;
                str += params.state ? ' / ' + params.state : '';	$title = params.socpCategory;
                str += params.area ? ', ' + params.area : '';		$state = params.state;
                $subtitle = params.socp;							$area = params.area;
            } else {
                str += params.socpCategory ? ' / ' + params.socpCategory : '';
            }

            var sum = params.sum.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,').replace(/\.(.*)/, '');

        });

        var dataTable = new google.visualization.DataTable();
        dataTable.addColumn('number', 'Year');

        var step;
        for (step = 0; step < window.chartsData.length; step++) {
            dataTable.addColumn('number', 'Wage');
            dataTable.addColumn({type: 'string', role: 'tooltip'});
        }

        dataTable.addRows(totalData);

        // var dataTable = google.visualization.arrayToDataTable(totalData);
        var options = getChartOptions();
        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

        chart.draw(dataTable, options);

        $('#loading').hide();
    }

    function generateTooltip(item, socp) {
        return item[0] + ' Years Old' + "\r\n" + socp + ' $' + Math.round(item[1] / 1000) + 'K/year';
    }

    function removeChartData(index) {
        window.chartsData.splice(index, 1);
        drawChart();
        return false;
    }

</script>
</body>

</html>